<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />


<meta name="date" content="2020-10-26" />

<title>Tasmania</title>

<script>// Hide empty <a> tag within highlighted CodeBlock for screen reader accessibility (see https://github.com/jgm/pandoc/issues/6352#issuecomment-626106786) -->
// v0.0.1
// Written by JooYoung Seo (jooyoung@psu.edu) and Atsushi Yasumoto on June 1st, 2020.

document.addEventListener('DOMContentLoaded', function() {
  const codeList = document.getElementsByClassName("sourceCode");
  for (var i = 0; i < codeList.length; i++) {
    var linkList = codeList[i].getElementsByTagName('a');
    for (var j = 0; j < linkList.length; j++) {
      if (linkList[j].innerHTML === "") {
        linkList[j].setAttribute('aria-hidden', 'true');
      }
    }
  }
});
</script>
<style type="text/css">
a.anchor-section {margin-left: 10px; visibility: hidden; color: inherit;}
a.anchor-section::before {content: '#';}
.hasAnchor:hover a.anchor-section {visibility: visible;}
</style>
<script>// Anchor sections v1.0 written by Atsushi Yasumoto on Oct 3rd, 2020.
document.addEventListener('DOMContentLoaded', function() {
  // Do nothing if AnchorJS is used
  if (typeof window.anchors === 'object' && anchors.hasOwnProperty('hasAnchorJSLink')) {
    return;
  }

  const h = document.querySelectorAll('h1, h2, h3, h4, h5, h6');

  // Do nothing if sections are already anchored
  if (Array.from(h).some(x => x.classList.contains('hasAnchor'))) {
    return null;
  }

  // Use section id when pandoc runs with --section-divs
  const section_id = function(x) {
    return ((x.classList.contains('section') || (x.tagName === 'SECTION'))
            ? x.id : '');
  };

  // Add anchors
  h.forEach(function(x) {
    const id = x.id || section_id(x.parentElement);
    if (id === '') {
      return null;
    }
    let anchor = document.createElement('a');
    anchor.href = '#' + id;
    anchor.classList = ['anchor-section'];
    x.classList.add('hasAnchor');
    x.appendChild(anchor);
  });
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Tasmania</h1>
<h4 class="date">2020-10-26</h4>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">library</span>(sugarbag)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw">library</span>(tidyr)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="kw">library</span>(tibble)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="kw">library</span>(ggplot2)</span></code></pre></div>
<div id="creating-a-hexagon-map-of-tasmania" class="section level2">
<h2>Creating a hexagon map of Tasmania</h2>
<p>Tasmania is the southern-most state of Australia, it has one large land mass and several smaller islands.</p>
<div id="data" class="section level3">
<h3>Data</h3>
<p>We will use the Australian Bureau of Statistics’ ESRI shape files to build our map.</p>
<p>The set has been filtered for only Tasmanian areas. The data set of Tasmanian Statistical Areas at level two has been provided as a package data set, <code>?tas_sa2</code>.</p>
</div>
<div id="centroids" class="section level3">
<h3>Centroids</h3>
<p>The function <code>create_centroids</code> finds the central points of the polygons provided as an argument.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># Find the longitude and latitude centroid for each region or area</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>centroids &lt;-<span class="st"> </span><span class="kw">create_centroids</span>(tas_sa2, <span class="dt">sf_id =</span> <span class="st">&quot;SA2_NAME16&quot;</span>)</span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="co">#&gt; Warning in st_centroid.sfc(., of_largest_polygon = largest): st_centroid does</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">#&gt; not give correct centroids for longitude/latitude data</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co">#&gt; Linking to GEOS 3.8.0, GDAL 3.0.4, PROJ 6.3.1</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co">#&gt; Warning: st_crs&lt;- : replacing crs does not reproject data; use st_transform for</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co">#&gt; that</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co">#&gt; Warning: st_crs&lt;- : replacing crs does not reproject data; use st_transform for</span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="co">#&gt; that</span></span></code></pre></div>
</div>
<div id="hexagon-grid" class="section level3">
<h3>Hexagon grid</h3>
<p>To tessellate correctly, all the hexagons must be evenly spaced. This function creates a grid of possible locations for the polygons.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>grid &lt;-<span class="st"> </span><span class="kw">create_grid</span>(<span class="dt">centroids =</span> centroids, <span class="dt">hex_size =</span> <span class="fl">0.2</span>, <span class="dt">buffer_dist =</span> <span class="fl">1.2</span>)</span></code></pre></div>
<p>The <code>sugarbag</code> package operates by creating a grid of possible hexagons to allocate electorates. The buffer extends the grid beyond the geographical space, this is especially useful for densely populated coastal areas or cities, such as Brisbane and Sydney in this case, Hobart.</p>
</div>
<div id="allocate-areas" class="section level3">
<h3>Allocate areas</h3>
<p>Each polygon centroid will be allocated to the closest available hexagon grid point. The capital cities data set will be used to preserve neighbourly relationships. The <code>allocate</code> function requires two inputs, the centroids and the grid.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># Allocate the centroids to the hexagon grid</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="co"># We have the same amount of rows, as individual regions</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>hex_allocated &lt;-<span class="st"> </span><span class="kw">allocate</span>(<span class="dt">centroids =</span> centroids,</span>
<span id="cb4-4"><a href="#cb4-4"></a>                          <span class="dt">sf_id =</span> <span class="st">&quot;SA2_NAME16&quot;</span>,</span>
<span id="cb4-5"><a href="#cb4-5"></a>                          <span class="dt">hex_grid =</span> grid,</span>
<span id="cb4-6"><a href="#cb4-6"></a>                          <span class="dt">hex_size =</span> <span class="fl">0.2</span>, <span class="co"># same size used in create_grid</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>                          <span class="dt">hex_filter =</span> <span class="dv">10</span>,</span>
<span id="cb4-8"><a href="#cb4-8"></a>                          <span class="dt">focal_points =</span> capital_cities,</span>
<span id="cb4-9"><a href="#cb4-9"></a>                          <span class="co"># same column used in create_centroids</span></span>
<span id="cb4-10"><a href="#cb4-10"></a>                          <span class="dt">width =</span> <span class="dv">30</span>, <span class="dt">verbose =</span> <span class="ot">TRUE</span>) </span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="co">#&gt; Finding closest point in focal_points data set.</span></span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="co">#&gt; Allocating centroids, in order of distance to closest focal point.</span></span></code></pre></div>
<p>The function <code>fortify_hexagon</code> assists in plotting. We now have 6 points per region, one for each point of a hexagon. Connecting these points will allow actual hexagons to be plotted.</p>
<p>The additional demographic information or data can now be added. This can be used to allow plots to be coloured by region.</p>
<p>For animations to move between geography and hexagons the <code>sf_id</code> must match, there also needs to be an identifier to separate the states to animate between for <code>gganimate</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>hexagons &lt;-<span class="st"> </span>hex_allocated <span class="op">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="st">  </span><span class="kw">fortify_hexagon</span>(<span class="dt">hex_size =</span> <span class="fl">0.2</span>, <span class="dt">sf_id =</span> <span class="st">&quot;SA2_NAME16&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="st">  </span><span class="kw">left_join</span>(., tas_sa2) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">poly_type =</span> <span class="st">&quot;hex&quot;</span>)</span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">#&gt; Joining, by = &quot;SA2_NAME16&quot;</span></span>
<span id="cb5-6"><a href="#cb5-6"></a></span>
<span id="cb5-7"><a href="#cb5-7"></a>polygons &lt;-<span class="st"> </span><span class="kw">fortify_sfc</span>(tas_sa2) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">poly_type =</span> <span class="st">&quot;geo&quot;</span>)</span>
<span id="cb5-9"><a href="#cb5-9"></a></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="kw">ggplot</span>(<span class="dt">mapping =</span> <span class="kw">aes</span>(<span class="dt">fill =</span> SA4_NAME16)) <span class="op">+</span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> polygons, <span class="kw">aes</span>(<span class="dt">x=</span>long, lat, <span class="dt">group =</span> <span class="kw">interaction</span>(SA2_NAME16,polygon)), <span class="dt">alpha =</span> <span class="fl">0.4</span>) <span class="op">+</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> hexagons, <span class="kw">aes</span>(<span class="dt">x=</span>long, lat, <span class="dt">group =</span> <span class="kw">interaction</span>(SA2_NAME16))) <span class="op">+</span><span class="st"> </span><span class="kw">scale_fill_viridis_d</span>()</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>hexagon_points &lt;-<span class="st"> </span>hexagons <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="st">  </span><span class="kw">select</span>(SA4_NAME16, SA2_NAME16,    </span>
<span id="cb6-3"><a href="#cb6-3"></a>SA2_NAME16, long, lat, poly_type) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="st">  </span><span class="kw">left_join</span>(polygons <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">distinct</span>(SA2_NAME16, polygon), <span class="dt">by =</span> <span class="st">&quot;SA2_NAME16&quot;</span>)</span>
<span id="cb6-5"><a href="#cb6-5"></a>polygon_points &lt;-<span class="st"> </span>polygons <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-6"><a href="#cb6-6"></a><span class="st">  </span><span class="kw">select</span>(SA4_NAME16, SA2_NAME16,    </span>
<span id="cb6-7"><a href="#cb6-7"></a>SA2_NAME16, long, lat, polygon, poly_type)</span>
<span id="cb6-8"><a href="#cb6-8"></a>animate_tas &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(hexagon_points, polygon_points) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">left_join</span>(homeless)</span>
<span id="cb6-9"><a href="#cb6-9"></a><span class="co">#&gt; Joining, by = &quot;SA2_NAME16&quot;</span></span>
<span id="cb6-10"><a href="#cb6-10"></a></span>
<span id="cb6-11"><a href="#cb6-11"></a>animate_tas <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>long, <span class="dt">y=</span>lat, <span class="dt">group =</span> <span class="kw">interaction</span>(polygon, SA2_NAME16))) <span class="op">+</span></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="st">  </span><span class="kw">geom_polygon</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> SA4_NAME16)) <span class="op">+</span></span>
<span id="cb6-14"><a href="#cb6-14"></a><span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> polygon_points <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">-</span>poly_type), <span class="dt">fill =</span> <span class="st">&quot;grey40&quot;</span>, <span class="dt">alpha =</span> <span class="fl">0.05</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="st">  </span><span class="kw">coord_equal</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="st">  </span><span class="kw">theme_void</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb6-17"><a href="#cb6-17"></a><span class="st">  </span><span class="kw">guides</span>(<span class="dt">fill =</span> <span class="kw">guide_legend</span>(<span class="dt">title =</span> <span class="ot">NULL</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb6-18"><a href="#cb6-18"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="op">+</span></span>
<span id="cb6-19"><a href="#cb6-19"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>poly_type) <span class="op">+</span><span class="st"> </span></span>
<span id="cb6-20"><a href="#cb6-20"></a><span class="st">  </span><span class="kw">scale_fill_viridis_d</span>()</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">library</span>(gganimate)</span>
<span id="cb7-2"><a href="#cb7-2"></a></span>
<span id="cb7-3"><a href="#cb7-3"></a>animation &lt;-<span class="st"> </span>animate_tas <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">x=</span>long, <span class="dt">y=</span>lat, <span class="dt">group =</span> <span class="kw">interaction</span>(polygon, SA2_NAME16))) <span class="op">+</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="st">  </span><span class="kw">geom_polygon</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> SA4_NAME16)) <span class="op">+</span></span>
<span id="cb7-6"><a href="#cb7-6"></a><span class="st">  </span><span class="kw">geom_polygon</span>(<span class="dt">data =</span> polygon_points <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">-</span>poly_type), <span class="dt">fill =</span> <span class="st">&quot;grey40&quot;</span>, <span class="dt">alpha =</span> <span class="fl">0.05</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb7-7"><a href="#cb7-7"></a><span class="st">  </span><span class="kw">coord_equal</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="st">  </span><span class="kw">theme_void</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="st">  </span><span class="kw">guides</span>(<span class="dt">fill =</span> <span class="kw">guide_legend</span>(<span class="dt">title =</span> <span class="ot">NULL</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="op">+</span></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="st">  </span><span class="kw">transition_states</span>(<span class="dt">states =</span> poly_type) <span class="op">+</span><span class="st"> </span></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="st">  </span><span class="kw">scale_fill_viridis_d</span>()</span>
<span id="cb7-13"><a href="#cb7-13"></a></span>
<span id="cb7-14"><a href="#cb7-14"></a>animated &lt;-<span class="st"> </span><span class="kw">animate</span>(animation, <span class="dt">fps =</span> <span class="dv">10</span>, <span class="dt">duration =</span> <span class="dv">15</span>, </span>
<span id="cb7-15"><a href="#cb7-15"></a>                    <span class="dt">start_pause =</span> <span class="dv">5</span>, <span class="dt">end_pause =</span> <span class="dv">5</span>, <span class="dt">rewind =</span> <span class="ot">FALSE</span>)</span>
<span id="cb7-16"><a href="#cb7-16"></a></span>
<span id="cb7-17"><a href="#cb7-17"></a><span class="kw">anim_save</span>(<span class="dt">filename =</span> <span class="st">&quot;tasmania_animation.gif&quot;</span>, animated)</span></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
